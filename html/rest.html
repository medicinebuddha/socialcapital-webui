<!DOCTYPE html>
<html>
    <head>
        <title>Jquery Rest Sample</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="../resources/bootstrap/css/bootstrap.css" type="text/css" rel="stylesheet"/>
        <link href="../resources/bootstrap/css/bootstrap-responsive.css" type="text/css" rel="stylesheet"/>
        <link href="../resouces/css/docs.css" type="text/css" rel="stylesheet"/>
        <link href="../resources/css/docs-cn.css" type="text/css" rel="stylesheet"/>
        <link href="../resouces/google-code-prettify/prettify.css" type="text/css" rel="stylesheet"/>
        <script src="../resources/js/jquery.js" type="text/javascript"></script>  
        <script src="../resources/bootstrap/js/bootstrap.js" type="text/javascript"></script>
        <script src="../resources/holder/holder.js" type="text/javascript"></script> 
        <script src="../resources/google-code-prettify/prettify.js" type="text/javascript"></script> 
        <script src="../resources/js/application.js" type="text/javascript"></script> 

        <script src="../resources/js/form2json.js" type="text/javascript"></script>
        <script src="../resources/js/jsrender.js" type="text/javascript"></script>
        <script src="../resources/jquery/jquery.observable.js" type="text/javascript"></script>
        <script src="../resources/jquery/jquery.views.js" type="text/javascript"></script> 
        <script src="../resources/amplify/amplify.js"></script> 
    </head>
    <body>
        <form id="loginForm" method="post"> 
            <label for="username">User:</label>
            <input name="username" id="username" type="text" value="user"/>
            <label for="password">Password:</label>
            <input name="password" id="password" type="text" value="password"/>
            <input type="submit"  value="登录"/>
        </form> 
        <div id="output1"></div>
        <script type="text/javascript">
            var options={
                url : "../webresources/login/json",
                contentType:"application/json",
                data: $("#loginForm").form2json(),
                target: '#output1',
                success : showResponse
            };
            
            // post-submit callback 
            function showResponse(responseText, statusText, xhr, $form)  { 
                // for normal html responses, the first argument to the success callback 
                // is the XMLHttpRequest object's responseText property 
 
                // if the ajaxForm method was passed an Options Object with the dataType 
                // property set to 'xml' then the first argument to the success callback 
                // is the XMLHttpRequest object's responseXML property 
 
                // if the ajaxForm method was passed an Options Object with the dataType 
                // property set to 'json' then the first argument to the success callback 
                // is the json data object returned by the server 
 
                alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
                    '\n\nThe output div should have already been updated with the responseText.'); 
            } 
            
            $("#loginForm").ajaxForm(options);
            function login(){
                var json = $("#loginForm").form2json();
                alert(json);
            };
        </script>
    </body>
</html>
